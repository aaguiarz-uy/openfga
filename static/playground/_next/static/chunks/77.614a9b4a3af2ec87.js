"use strict";(("undefined"!==typeof self?self:this).webpackChunk_N_E=("undefined"!==typeof self?self:this).webpackChunk_N_E||[]).push([[77],{32738:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ye}});var r=n(94776),o=n.n(r),i=n(52322),a=(n(2443),n(76635)),s=n.n(a),l=n(25237),c=n(5632),u=n(2784),d=n(72282),p=n.n(d),f=n(1128),h=n(342),x=n(17546),m=n(23729),g=n.n(m),b=n(75969),y=n(97324),v=n(44694),j=n(38687),w=n.n(j),S=n(82142),k=n(56012),T=function(e){var t=e.alerts;return(0,i.jsx)(y.Box,{position:"absolute",left:"50%",bottom:"calc(-100%)",style:{zIndex:2,transform:"translateX(-50%)"},children:(0,i.jsx)(y.RowLayout,{children:t.map((function(e){return"success"===e.type?(0,i.jsx)(v.Alert,{icon:"check-circle",appearance:"success",dismissAfterSeconds:5,title:"Success!",children:e.message}):(0,i.jsx)(v.Alert,{icon:"danger",dismissAfterSeconds:5,appearance:"danger",title:"Something went wrong!",children:e.message})}))})})},C=n(75177),A=n(40781),E=n(23023),L=n(98430),O=n(74833),I=n(53210),B=n(50381),P=n.n(B),R=n(40766),z=n(1292);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(){var e,t,n=(e=["\n    &.MuiButtonBase-root {\n      display: inherit;\n      padding-top: 6px;\n      padding-bottom: 6px;\n      padding-left: 16px;\n      padding-right: 16px;\n    }\n  "],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return N=function(){return n},n}var F=function(e){var t=e.MenuButton,n=e.menuItems,r=e.id,o=e.hasIcons,a=void 0!==o&&o,s=e.disablePortal,l=void 0!==s&&s,d=(0,c.useRouter)(),p=_(u.useState(!1),2),f=p[0],h=p[1],x=u.useRef(null),m=(0,y.styled)(k.sN)(N()),g=function(){h((function(e){return!e}))},b=function(e){var t;(null===(t=x.current)||void 0===t?void 0:t.contains(e.target))||h(!1)},v=function(e){"Tab"===e.key&&(e.preventDefault(),h(!1))};return(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsx)(t,{id:"".concat(r,"-button"),ref:x,"aria-controls":f?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:g}):(0,i.jsx)(y.Button,{id:"".concat(r,"-button"),ref:x,"aria-controls":f?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:g,variant:"text",sx:{padding:"6px 8px !important"},children:(0,i.jsx)(R.Hu,{color:"#e1e1e1",style:{display:"flex"}})}),x.current&&(0,i.jsx)(k.rD,{open:f,anchorEl:x.current,role:void 0,transition:!0,placement:"bottom-end",disablePortal:l,children:function(e){var t=e.TransitionProps,o=e.placement;return(0,i.jsx)(k.Q5,function(e){for(var t=arguments,n=function(n){var r=null!=t[n]?t[n]:{},o=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),o.forEach((function(t){D(e,t,r[t])}))},r=1;r<arguments.length;r++)n(r);return e}({},t,{style:{transformOrigin:"bottom"===o?"center top":"center bottom"},children:(0,i.jsx)(y.Box,{sx:{mt:".25rem",px:".4rem",backgroundColor:"background.paper",border:"1px solid #3a3a3a",boxShadow:"0px 44.8625px 52.7794px rgba(0, 0, 0, 0.08),\n                  0px 18.7425px 22.05px rgba(0, 0, 0, 0.0575083),\n                  0px 10.0206px 11.789px rgba(0, 0, 0, 0.0476886),\n                  0px 5.61748px 6.6088px rgba(0, 0, 0, 0.04),\n                  0px 2.9834px 3.50988px rgba(0, 0, 0, 0.0323114),\n                  0px 0px 8px rgba(0, 0, 0, 0.1)",zIndex:"999999",borderRadius:"4px"},children:(0,i.jsx)(z.Z,{onClickAway:b,children:(0,i.jsx)(k.qy,{autoFocusItem:f,id:r,onKeyDown:v,children:n.map((function(e,t){if(e.isDivider)return(0,i.jsx)(k.iz,{},"".concat(r,"-divider-").concat(t));return(0,i.jsx)(m,{id:e.id,onClick:function(t){t.preventDefault(),e.action&&e.action(e),e.href&&d.push(e.href),b(t)},color:e.color,children:(0,i.jsxs)(y.Box,{sx:{display:"grid",gridTemplateColumns:a?"1rem 1fr":"1fr",gridGap:20,alignItems:"flex-start"},children:[e.icon?(0,i.jsx)(e.icon,{stroke:"rgb(164, 169, 176)",size:20}):null,(0,i.jsx)(y.Text,{variant:"body2",sx:{mt:"0 !important"},color:"rgb(164, 169, 176)",children:e.text})]})},e.id)}))})})})}))}})]})},W=function(e){var t=e.selectedStoreLabel,n=e.onButtonClickSuccess,r=e.storeManager;if(!!A.tQ[t])return null;var o=r.getId(t)||t,a=[{id:"copy-store-id",text:"Copy Store ID",icon:R.TI,action:function(){P()(o),n()}},{id:"share-playground",text:"Share ",icon:R.aA,action:function(){P()("".concat(window.location.origin||"","/stores/create?id=").concat(o)),n()}}];return(0,i.jsx)(F,{hasIcons:!0,id:"store-options",menuItems:a})},Z=n(3510);function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var H=(0,y.styled)("div")({'[data-cosmos-key="button-group"]':{alignSelf:"center"},'[data-cosmos-key="button-group"] span > div:hover, [data-cosmos-key="button-group"] span > div:focus':{borderColor:"#edf2f7",boxShadow:"0px 0px 0 1px #edf2f7"}}),V=function(e){var t=e.selectedStoreLabel,n=e.onStoreChange,r=e.storeManager.getAll().map((function(e){return{value:e.label,text:e.label,isGlobal:e.isGlobal}})),o=U(a.partition(r,(function(e){return e.isGlobal})),2),s=o[0],l=o[1];return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(H,{children:(0,i.jsx)(v.ButtonGroup,{compressed:!0,children:(0,i.jsx)(Z.e,{children:(0,i.jsx)(v.Select,{placeholder:"Stores",value:t,onChange:n,options:[{groupName:"Default Stores",items:s},{groupName:"User Stores",items:l}]})})})})})},Q=n(89687);function $(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function J(){var e=$(["\n  ","\n  ",'\n  padding: 4px;\n  padding-right: 0px;\n  transition: all 0.3s ease;\n  "&:" hover {\n    color: rgb(0, 149, 255);\n  }\n']);return J=function(){return e},e}function q(){var e=$(["\n  width: calc(100% - 16px);\n  height: 2rem;\n  margin-bottom: 16px;\n  display: flex;\n  align-items: center;\n  & > button {\n    color: white;\n    text-transform: none;\n    &:hover {\n      background-color: #262626;\n      color: #e3e3e3;\n    }\n  }\n"]);return q=function(){return e},e}function K(){var e=$(["\n  ","\n  display: flex;\n  margin-left: 13px;\n  margin-right: 13px;\n"]);return K=function(){return e},e}function X(){var e=$(["\n  ","\n  & > .tooltip {\n    margin-right: 8px;\n    cursor: pointer;\n    height: 25.45px;\n    align-items: flex-end;\n    display: flex;\n  }\n"]);return X=function(){return e},e}function Y(){var e=$(["\n  display: flex;\n  align-items: flex-end;\n  height: 25.45px;\n  & > div {\n    margin-right: 8px;\n    width: 40px;\n    justify-content: space-around;\n    display: flex;\n    align-items: flex-end;\n  }\n  span {\n    height: 21px;\n  }\n"]);return Y=function(){return e},e}var ee=(0,Q.ZP)("div")(J(),(function(e){return e.showExpandTestTuple&&"\n    transform: rotate(90deg);\n    padding: 4px;\n    padding-right: 0px;\n    transition: all 0.3s ease;\n"}),(function(e){return e.showMore&&"\n    transform: rotate(180deg);\n    transition: all 0.3s ease;\n"})),te=(0,Q.ZP)("div")(q()),ne=(0,Q.ZP)("div")(K(),(function(e){return e.disabled&&"\n      pointer-events: none;\n"})),re=(0,Q.ZP)("div")(X(),(function(e){return e.disabled&&"\n      pointer-events: none;\n"})),oe=(0,Q.ZP)("div")(Y()),ie=function(e){var t=e.runAll,n=e.runSelected,r=e.runFailed,o=e.tests,a=e.setShowExpandTestTuple,s=e.showExpandTestTuple,l=e.isGlobalStore;return(0,i.jsxs)(te,{children:[(0,i.jsxs)(ne,{disabled:0===o.length,children:[(0,i.jsx)(re,{children:(0,i.jsx)(k.u,{className:"tooltip",title:"Run all assertions",children:(0,i.jsxs)("svg",{onClick:function(){t()},width:"27",height:"20",viewBox:"0 0 27 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.4514 2.5L22.645 10L10.4514 17.5V2.5V2.5Z",stroke:"white",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.35474 2.5L16.5483 10L4.35474 17.5V2.5V2.5Z",stroke:"white",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M18.29 10L11.1046 14.3301L11.1046 5.66987L18.29 10Z",fill:"#141517"})]})})}),(0,i.jsx)(re,{disabled:0===o.filter((function(e){return e.selected})).length,children:(0,i.jsx)(k.u,{className:"tooltip",title:"Run selected tests",children:(0,i.jsx)(k.o1,{color:"white",onClick:function(){n()}})})}),(0,i.jsx)(re,{disabled:0===o.filter((function(e){return!1===e.result})).length,children:(0,i.jsx)(k.u,{className:"tooltip",title:"Run failed tests",children:(0,i.jsxs)("svg",{onClick:function(){r()},width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.08325 1.2041L7.91659 4.81521L2.08325 8.42632V1.2041V1.2041Z",stroke:"white",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.8572 18.7656C16.1446 18.7656 18.8095 16.0019 18.8095 12.5928C18.8095 9.1836 16.1446 6.41992 12.8572 6.41992C9.56976 6.41992 6.90479 9.1836 6.90479 12.5928C6.90479 16.0019 9.56976 18.7656 12.8572 18.7656Z",stroke:"white",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M14.643 10.7412L11.0715 14.4449",stroke:"white",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M11.0715 10.7412L14.643 14.4449",stroke:"white",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"})]})})})]}),(0,i.jsxs)(oe,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(k.KG,{color:"#42abff"})," ",(0,i.jsx)("span",{style:{color:"#42abff"},children:o.length})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(k.rE,{color:"#50C95B"}),(0,i.jsx)("span",{style:{color:"#50C95B"},children:o.filter((function(e){return e.result})).length})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(k.wD,{color:"#dc5157"}),(0,i.jsx)("span",{style:{color:"#dc5157"},children:o.filter((function(e){return!1===e.result})).length})]})]}),(0,i.jsx)("div",{style:{width:"1px",backgroundColor:"#3a3a3a",height:"32px",marginRight:"8px"}}),!l&&(0,i.jsx)(O.m,{size:"small",variant:"text",style:{height:"33px",minWidth:"150px",padding:"0px 0px 0px 10px !important",flexWrap:"nowrap",flex:"0 0 auto"},onClick:function(){return a(!s)},children:(0,i.jsxs)(y.Box,{children:[(0,i.jsx)(y.Box,{sx:{fontSize:"10px",alignItems:"center",flexWrap:"nowrap",flex:"0 0 auto"},children:"Add Assertion"}),(0,i.jsx)(ee,{showExpandTestTuple:s,children:(0,i.jsx)("svg",{style:{marginLeft:"0px"},width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M7.125 14.25L11.875 9.5L7.125 4.75",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})})]})};function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e){for(var t=arguments,n=function(n){var r=null!=t[n]?t[n]:{},o=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),o.forEach((function(t){se(e,t,r[t])}))},r=1;r<arguments.length;r++)n(r);return e}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ue=function(e){var t=e.namespaces,n=e.onCreate,r=e.setShowExpandTestTuple,o=e.test,s=e.setTest,l=e.store,c=ce(u.useState(!0),2),d=c[0],p=c[1],f=ce(u.useState(!0),2),h=f[0],x=f[1],m=ce(u.useState(!0),2),g=m[0],b=m[1],y=ce(u.useState(!1),2),j=y[0],w=y[1],S=a.keyBy(t,"name"),k=u.useCallback((function(){s({object:"",relation:"",user:"",check:!0})}),[s]);u.useEffect((function(){k()}),[l,k]);var T={object:function(e){var t=ce(e.split(":"),1)[0];return S[t]&&e.includes(":")&&e.length<256},relation:function(e){return!e.includes("#")&&e.length&&e.length<256},user:function(e){var t=!0;if(e.includes(":")){var n=ce(e.split(":"),1)[0];t=!!S[n]}return t&&e.length<512}},C={object:p,relation:x,user:b},A=function(e,t){s(le({},o,se({},e,t))),T[e](t)?C[e](!1):C[e](!0)};return(0,i.jsx)(v.Form,{onSubmit:function(e){e.preventDefault();var t=le({},o);w(!0),n(t).then((function(){k(),w(!1)}),(function(){w(!1)}))},children:(0,i.jsxs)(v.RowLayout,{gutter:"xsmall",children:[(0,i.jsxs)(v.ColumnLayout,{distribution:"1/4 3/4",children:[(0,i.jsx)("span",{children:"User"}),(0,i.jsx)(v.TextInput,{onChange:function(e){return A("user",e.target.value)},hasError:g,value:o.user})]}),(0,i.jsxs)(v.ColumnLayout,{distribution:"1/4 3/4",children:[(0,i.jsx)("span",{children:"Relation"}),(0,i.jsx)(v.TextInput,{onChange:function(e){return A("relation",e.target.value)},hasError:h,value:o.relation})]}),(0,i.jsxs)(v.ColumnLayout,{distribution:"1/4 3/4",children:[(0,i.jsx)("span",{children:"Object"}),(0,i.jsx)(v.TextInput,{onChange:function(e){return A("object",e.target.value)},hasError:d,value:o.object})]}),(0,i.jsxs)(v.ColumnLayout,{distribution:"1/4 3/4",children:[(0,i.jsx)("span",{children:"Allowed"}),(0,i.jsx)(v.Switch,{labelPosition:"right",accessibleLabels:["True","False"],on:o.check,onChange:function(e){return s(Object.assign(o,{check:e}))}})]}),(0,i.jsxs)(v.StackLayout,{distribution:"end",children:[(0,i.jsx)(O.m,{variant:"outlined",type:"button",onClick:function(){r(!1),k()},children:"Cancel"}),(0,i.jsx)(O.m,{disabled:j||d||g||h,variant:"contained",color:"primary",type:"submit",children:"Save"})]})]})})},de=(0,y.styled)("div")({position:"relative",padding:"14px",border:"1px solid #3a3a3a",borderRadius:"4px",marginBottom:"16px",marginRight:"4px",input:{backgroundColor:"#232323",borderColor:"#535353",color:"rgb(160, 160, 160)"},"input: hover":{borderColor:"rgb(3, 134, 227)"},"input: focus":{borderColor:"rgb(3, 143, 227)",boxShadow:"0px 0px 0 1px #0386e3"},'[data-cosmos-key="column-layout.item"]':{alignSelf:"center"}});function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fe(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,o)}function he(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){fe(i,r,o,a,s,"next",e)}function s(e){fe(i,r,o,a,s,"throw",e)}a(void 0)}))}}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function me(e){for(var t=arguments,n=function(n){var r=null!=t[n]?t[n]:{},o=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),o.forEach((function(t){xe(e,t,r[t])}))},r=1;r<arguments.length;r++)n(r);return e}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||ye(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e){return function(e){if(Array.isArray(e))return pe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ye(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){if(e){if("string"===typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pe(e,t):void 0}}var ve=(0,y.styled)("div")((function(e){var t=e.selected;return{borderColor:t?"rgb(3, 134, 227) !important":"inherit",boxShadow:t?"0px 0px 2px 0px #0386e3":"none",position:"relative",padding:"10px 13px",listStyle:"none",margin:0,border:"1px solid #3a3a3a",borderRadius:"4px",fontStyle:"normal","font-weight":"normal",fontSize:"14px",lineHeight:"19px",color:"#e3e3e3",marginBottom:"16px",display:"flex",alignItems:"center",width:"calc(100% - 10px)","&:hover":{borderColor:"rgb(3, 134, 227)"},ul:{flexDirection:"column",height:"100%",justifyContent:"space-evenly",margin:"0px 0px 0px 5px",width:"calc(100% - 48px)"},span:{display:"inline-block",width:"70px",marginRight:"5px",fontStyle:"normal","font-weight":"500",fontSize:"12px",lineHeight:"13px",color:"#868686",textTransform:"uppercase"},li:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"calc(100% - 70px)"}}})),je=function(e){var t=e.namespaces,n=e.tests,r=e.onTestCreate,a=e.store,l=e.showExpandTestTuple,c=e.setShowExpandTestTuple,d=e.test,p=e.setTest,f=e.onTestDelete,h=e.addAlert,x=e.isGlobalStore,m=e.setTests,g=e.onPressExecuteQueryFromTest,b=(0,A.ZH)(a.id).execCheck,y=ge(u.useState(!1),2),j=y[0],w=y[1],S=ge(u.useState(null),2),k=S[0],T=S[1],C=u.useCallback(function(){var e=he(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(!0),t.length){e.next=5;break}return h("error","No tests selected."),w(!1),e.abrupt("return");case 5:return e.abrupt("return",Promise.all(t.map(function(){var e=he(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({object:t.object,user:t.user,relation:t.relation});case 2:return n=e.sent,r=n.allowed,i=void 0!==r&&r,e.abrupt("return",me({},t,{isAllowed:i}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){var t=s().keyBy(e,(function(e){return"".concat(e.object,"#").concat(e.relation,"@").concat(e.user)})),r=n.map((function(e){var n=t["".concat(e.object,"#").concat(e.relation,"@").concat(e.user)];return me({},s().omit(e,["result"]),{result:n?n.isAllowed===e.check:void 0})})).sort((function(e,t){return Number(e.result)-Number(t.result)}));m(r)})).catch((function(e){console.error(e),h("error","Client error: Error running tests, try again later")})).finally((function(){w(!1)})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[w,h,b,m,n]),E=function(){var e=he(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.map((function(e){return e})).map((function(e){return me({},e,{hidden:!1})})),m(t),T(t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=he(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(!0),t=n.filter((function(e){return!0===e.selected})).map((function(e){return me({},e,{hidden:!1})})),r=n.filter((function(e){return!0!==e.selected})).map((function(e){return me({},e,{hidden:!0})})),m(be(t).concat(be(r))),T(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=he(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(!0),t=n.filter((function(e){return!1===e.result})).map((function(e){return me({},e,{hidden:!1})})),r=n.filter((function(e){return!1!==e.result})).map((function(e){return me({},e,{hidden:!0})})),t.length){e.next=7;break}return h("error","There is no failed tests to run"),w(!1),e.abrupt("return",void 0);case 7:m(be(t).concat(be(r))),T(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.useEffect((function(){null!==k&&C(k)}),[k]),(0,i.jsxs)("div",{style:{height:"100%",overflow:"auto"},children:[(0,i.jsx)(ie,{tests:n,runAll:E,runSelected:L,runFailed:O,setShowExpandTestTuple:c,showExpandTestTuple:l,isGlobalStore:x}),l&&!x&&(0,i.jsx)(de,{children:(0,i.jsx)(ue,{namespaces:t,onCreate:r,setShowExpandTestTuple:c,test:d,setTest:p,store:a})}),j?(0,i.jsx)("div",{style:{width:"100%",height:"80%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,i.jsx)(v.Spinner,{size:"small",inverse:!0})}):n.map((function(e,t){return!e.hidden&&(0,i.jsxs)(ve,{onClick:function(){return function(e,t){if(e.selected){var r=be(n.slice(0,t)).concat([me({},n[t],{selected:!1})],be(n.slice(t+1)));m(r)}else{var o=be(n.slice(0,t)).concat([me({},n[t],{selected:!0})],be(n.slice(t+1)));m(o)}}(e,t)},selected:e.selected,children:[(0,i.jsx)("div",{style:{marginRight:"13px"},children:e.result?(0,i.jsxs)("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("circle",{cx:"15",cy:"15",r:"15",fill:"#05B316"}),(0,i.jsx)("path",{d:"M9 16.5L13.5 21L21 9",stroke:"white",strokeWidth:"2"})]}):void 0===e.result?(0,i.jsx)(v.Icon,{name:"help-fill",size:"30",color:"#42abff"}):(0,i.jsxs)("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("circle",{cx:"15",cy:"15",r:"15",fill:"#D00E17"}),(0,i.jsx)("path",{d:"M18.5 11.5L11.5 18.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M11.5 11.5L18.5 18.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,i.jsxs)("ul",{children:[(0,i.jsxs)("li",{children:[(0,i.jsx)("span",{children:"USER"}),e.user]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("span",{children:"RELATION"}),e.relation]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("span",{children:"OBJECT"}),e.object]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("span",{children:"ALLOWED"}),e.check?"True":"False"]})]}),!x&&(0,i.jsx)("div",{style:{position:"absolute",top:"calc(50% - 10px)",right:16,cursor:"pointer"},children:(0,i.jsx)(v.Tooltip,{position:"right",content:"Delete Test",children:(0,i.jsx)("button",{style:{backgroundColor:"transparent"},onClick:function(t){return f(t,s().pick(e,["user","object","relation","check"]))},children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#dc5157",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,i.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,i.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),(0,i.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,i.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})})}),(0,i.jsx)("div",{style:x?{position:"absolute",top:"calc(50% - 10px)",right:16,cursor:"pointer"}:{position:"absolute",top:"calc(50% - 10px)",right:50,cursor:"pointer"},children:(0,i.jsx)(v.Tooltip,{content:"Execute query",children:(0,i.jsx)("button",{style:{backgroundColor:"transparent"},onClick:function(t){return g(t,e)},children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#e3e3e3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-zap",children:(0,i.jsx)("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})})})})})]},"".concat(e.object,"-").concat(t))}))]})},we=n(30392);function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e){for(var t=arguments,n=function(n){var r=null!=t[n]?t[n]:{},o=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),o.forEach((function(t){ke(e,t,r[t])}))},r=1;r<arguments.length;r++)n(r);return e}function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ae=function(e){var t=e.onCreate,n=e.setShowExpandTuple,r=Ce(u.useState({user:"",relation:"",object:""}),2),o=r[0],a=r[1],s=Ce(u.useState(!0),2),l=s[0],c=s[1],d=Ce(u.useState(!0),2),p=d[0],f=d[1],h=Ce(u.useState(!0),2),x=h[0],m=h[1],g=Ce(u.useState(!1),2),b=g[0],y=g[1],j={object:function(e){return e.includes(":")&&e.length&&e.length<256},relation:function(e){return!e.includes("#")&&e.length&&e.length<256},user:function(e){return e.length&&e.length<512}},w={object:c,relation:f,user:m},S=function(e,t){a(Te({},o,ke({},e,t))),j[e](t)?w[e](!1):w[e](!0)};return(0,i.jsx)(v.Form,{onSubmit:function(e){e.preventDefault();var n=Te({},o);y(!0),t(n).then((function(){y(!1)}),(function(){y(!1)})),a({object:"",user:"",relation:""})},children:(0,i.jsxs)(v.RowLayout,{gutter:"small",children:[(0,i.jsxs)(v.ColumnLayout,{distribution:"1/4 3/4",children:[(0,i.jsx)("span",{children:"User"}),(0,i.jsx)(v.TextInput,{onChange:function(e){return S("user",e.target.value)},hasError:x,value:o.user})]}),(0,i.jsxs)(v.ColumnLayout,{distribution:"1/4 3/4",children:[(0,i.jsx)("span",{children:"Relation"}),(0,i.jsx)(v.TextInput,{onChange:function(e){return S("relation",e.target.value)},hasError:p,value:o.relation})]}),(0,i.jsxs)(v.ColumnLayout,{distribution:"1/4 3/4",children:[(0,i.jsx)("span",{children:"Object"}),(0,i.jsx)(v.TextInput,{onChange:function(e){return S("object",e.target.value)},hasError:l,value:o.object})]}),(0,i.jsxs)(v.StackLayout,{distribution:"end",children:[(0,i.jsx)(O.m,{variant:"outlined",type:"button",onClick:function(){n(!1),a({user:"",relation:"",object:""})},children:"Cancel"}),(0,i.jsx)(O.m,{disabled:b||l||x||p,variant:"contained",color:"primary",type:"submit",children:"Save"})]})]})})};function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Ie(){var e=Oe(["\n  &:hover {\n    background-color: #262626;\n    color: #e3e3e3;\n  }\n"]);return Ie=function(){return e},e}function Be(){var e=Oe(["\n  ",'\n  padding: 4px;\n  padding-right: 0px;\n  transition: all 0.3s ease;\n  top: 4px;\n  fill: none;\n  position: initial;\n  "&:" hover {\n    color: rgb(0, 149, 255);\n  }\n']);return Be=function(){return e},e}function Pe(){var e=Oe(['\n  height: 100%;\n  overflow: initial;\n  button {\n    &:hover {\n      color: inherit;\n    }\n  }\n  [aria-selected="true"] {\n    color: #635dff;\n    &:hover {\n      color: #635dff;\n    }\n  }\n  [aria-selected="false"] {\n    color: #e3e3e3;\n  }\n  [data-cosmos-key="tabs.item"] {\n    height: calc(100% - 56px);\n    padding-top: 8px;\n  }\n  [data-cosmos-key="tabs.list"] {\n    margin: 0;\n    border-bottom: 1px solid #3a3a3a;\n  }\n']);return Pe=function(){return e},e}var Re,ze=(0,y.styled)(O.m)(Ie()),Me=(0,y.styled)("div")(Be(),(function(e){return e.showExpandTuple&&"\n    transform: rotate(90deg);\n    padding: 4px;\n    padding-right: 0px;\n    transition: all 0.3s ease;\n"})),De=(0,y.styled)(v.Tabs)(Pe()),_e=function(e){var t=e.namespaces,n=e.tests,r=e.onTestCreate,o=e.onTestDelete,s=e.tuples,l=e.onTupleCreate,c=e.onTupleDelete,d=e.store,p=e.addAlert,f=e.setTests,h=e.onPressExecuteQueryFromTest,x=e.joy,m=d.isGlobal,g=void 0!==m&&m,b=Le(u.useState({user:"",relation:"",object:""}),2),j=b[0],w=b[1],S=Le(u.useState(!1),2),k=S[0],T=S[1],C=Le(u.useState({selected:0}),2),A=C[0],E=C[1],L=Le(u.useState(!1),2),O=L[0],I=L[1],B=Le(u.useState(!0),2),P=B[0],R=B[1],z=Le(u.useState({user:"",relation:"",object:"",check:!0}),2),M=z[0],D=z[1];return u.useEffect((function(){2===x.stepIndex&&T(!1)}),[x]),(0,i.jsxs)(De,{onSelect:function(e){E({selected:e})},selected:A.selected,children:[(0,i.jsx)(v.Tabs.Tab,{label:"Tuples (".concat(s.length,")"),children:(0,i.jsxs)(we.p,{children:[!g&&(0,i.jsx)(v.StackLayout,{distribution:"end",children:(0,i.jsx)(ze,{size:"small",variant:"text",style:{marginBottom:"13px",flex:"0 0 auto",height:"33px",fontSize:"10px",padding:"0px 0px 0px 10px !important",border:"0px"},onClick:function(){return T(!k)},children:(0,i.jsxs)(y.Box,{children:[(0,i.jsx)(y.Box,{sx:{fontSize:"10px",alignItems:"center",flexWrap:"nowrap",flex:"0 0 auto"},children:"Add Tuple"}),(0,i.jsx)(Me,{showExpandTuple:k,children:(0,i.jsx)("svg",{style:{marginLeft:"0px",height:"15px"},width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M7.125 14.25L11.875 9.5L7.125 4.75",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})})}),k&&!g&&(0,i.jsx)("div",{style:{position:"relative",padding:"14px",border:"1px solid #3a3a3a",borderRadius:"4px",marginBottom:"16px",marginRight:"4px"},children:(0,i.jsx)(Ae,{tuple:j,setTuple:w,onCreate:l,setShowExpandTuple:T})}),s.map((function(e,t){return(0,i.jsxs)("div",{style:{position:"relative"},children:[(0,i.jsxs)("ul",{children:[(0,i.jsxs)("li",{children:[(0,i.jsx)("span",{children:"USER"}),e.user]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("span",{children:"RELATION"}),e.relation]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("span",{children:"OBJECT"}),e.object]})]}),!g&&(0,i.jsx)("div",{style:{position:"absolute",top:30,right:16,cursor:"pointer"},children:(0,i.jsx)(v.Tooltip,{position:"right",content:"Delete Tuple",children:(0,i.jsx)("button",{style:{backgroundColor:"transparent"},onClick:function(){return c(a.pick(e,["user","object","relation"]))},children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#dc5157",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,i.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,i.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),(0,i.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,i.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})})}),(0,i.jsx)("div",{style:g?{position:"absolute",top:30,right:16,cursor:"pointer"}:{position:"absolute",top:30,right:50,cursor:"pointer"},children:(0,i.jsx)(v.Tooltip,{position:"right",content:"".concat(e.user," is a ").concat(e.relation," of ").concat(e.object),children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#e3e3e3",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),(0,i.jsx)("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]})})})]},"".concat(e.object,"-").concat(t))}))]})}),(0,i.jsx)(v.Tabs.Tab,{label:"Assertions (".concat(n.length,")"),children:(0,i.jsx)(je,{namespaces:t,store:d,isGlobalStore:g,tests:n,test:M,setTest:D,onTestCreate:r,onTestDelete:o,setShowExpandTestTuple:I,showExpandTestTuple:O,showEditor:P,setShowEditor:R,addAlert:p,setTests:f,onPressExecuteQueryFromTest:h})})]})};function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function We(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,o)}function Ze(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){We(i,r,o,a,s,"next",e)}function s(e){We(i,r,o,a,s,"throw",e)}a(void 0)}))}}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function He(){var e=Ue(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  user-select: none;\n  flex-direction: column;\n  height: 100%;\n\n  & > div:first-of-type {\n    width: auto;\n    height: auto;\n  }\n\n  p {\n    font-size: 18px;\n    color: #ffffff;\n    text-align: center;\n  }\n"]);return He=function(){return e},e}function Ve(){var e=Ue(['\n  h6 {\n    font-size: 1.125rem;\n    font-family: fakt-web, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif,\n      "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    font-weight: 500;\n    line-height: 1.33333;\n    letter-spacing: 0.00833em;\n    text-align: left;\n    margin: 0;\n  }\n\n  p {\n    font-size: 0.875rem;\n    font-family: fakt-web, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif,\n      "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    font-weight: 400;\n    line-height: 1.6;\n    letter-spacing: 0.01071em;\n    text-align: left;\n  }\n\n  #test {\n  }\n\n  #another-test {\n  }\n']);return Ve=function(){return e},e}function Qe(){var e=Ue(["\n  min-height: 0px;\n  font-size: 12px;\n"]);return Qe=function(){return e},e}var $e=(0,l.default)(Promise.resolve().then(n.bind(n,5156)),(Ne(Re={loadableGenerated:{webpack:function(){return[5156]}}},"loadableGenerated",{webpack:function(){return[5156]}}),Ne(Re,"ssr",!1),Re)),Je={".react-joyride__spotlight":{borderRadius:"0 !important"},".__floater":{marginLeft:"13px",marginRight:"13px",marginTop:"13px",marginBottom:"13px"},".__floater__arrow span svg polygon":{fill:"#212121"},".react-joyride__tooltip":{backgroundColor:"#212121 !important",color:"#fafafa !important",'[data-action="close"]':{width:"24px",height:"24px",outline:"none",svg:{display:"none"},"&:before":{content:'"\u2715"',fontSize:"14px",position:"relative",color:"#fafafa"}},'[data-action="primary"]':{marginTop:"13px !important",display:"inline-flex !important",verticalAlign:"middle !important",alignItems:"center !important",justifyContent:"center !important",lineHeight:"31px !important",marginLeft:"0 !important",textTransform:"uppercase !important",whiteSpace:"nowrap !important",letterSpacing:"1px !important",fontSize:"13px !important","font-weight":"500 !important",background:"#0095ff !important",border:"1px solid #0095ff !important",borderRadius:"3px !important",color:"#fff !important",padding:"0 12px !important",opacity:"1 !important",cursor:"pointer !important",transition:"border-color 0.25s,background 0.25s !important",outline:"none"},'[data-action="primary"]:disabled':{opacity:".5 !important"},'[data-action="back"]':{marginTop:"13px !important",display:"inline-flex !important",verticalAlign:"middle !important",alignItems:"center !important",justifyContent:"center !important",lineHeight:"31px !important",marginLeft:"0 !important",textTransform:"uppercase !important",whitBspace:"nowrap !important",letterSpacing:"1px !important",fontSize:"13px !important","font-weight":"500 !important",background:"transparent !important",border:"0 !important",color:"#fff !important",padding:"0 12px !important",opacity:"1 !important",cursor:"pointer !important",transition:"border-color 0.25s,background 0.25s !important",outline:"none"}}},qe=w().div(He()),Ke=w()(y.RowLayout)(Ve()),Xe=w()(v.Button)(Qe()),Ye=function(e){var t=e.storeLabel,n=(0,c.useRouter)(),r=Ge(u.useState(!1),2),a=r[0],l=r[1],d=Ge(u.useState(!0),2),m=d[0],j=d[1],w=Ge(u.useState(""),2),B=w[0],P=w[1],R=Ge(u.useState([]),2),z=R[0],M=R[1],D=Ge(u.useState(),2),_=D[0],N=D[1],F=Ge(u.useState([]),2),Z=F[0],G=F[1],U=Ge(u.useState([]),2),H=U[0],Q=U[1],$=Ge(u.useState([]),2),J=$[0],q=$[1],K=Ge(u.useState({}),2),X=K[0],Y=K[1],ee=Ge(u.useState(!0),2),te=ee[0],ne=ee[1],re=Ge(u.useState(!1),2),oe=re[0],ie=re[1],ae=Ge(u.useState(!1),2),se=ae[0],le=ae[1],ce=Ge(u.useState(!1),2),ue=ce[0],de=ce[1],pe=(new b.Z).get("localStores")||"",fe=new A.e0(pe),he=fe.getByLabel(t),xe=Ge(u.useState(he.assertions||[]),2),me=xe[0],ge=xe[1],be=Ge(u.useState(s().omit(he,["assertions"])),2),ye=be[0],ve=be[1],je=Ge(u.useState(""),2),we=je[0],Se=je[1],ke=Ge(u.useState(!1),2),Te=ke[0],Ce=ke[1],Ae=function(e){return function(){l(e)}},Ee=function(e,t){switch(e){case"success":return q(J.concat(function(e){return{message:e,type:"success"}}(t)));case"error":return q(J.concat(function(e){return{message:e,type:"error"}}(t)));default:(0,x.assertNever)(e)}};u.useEffect((function(){var e=(0,(0,A.ZH)(ye.id).getCompletionEntries)(z,Z);Q(e),Y({})}),[ye,z,Z]),u.useEffect((function(){var e=(0,A.ZH)(ye.id),t=e.readNamespaces,n=e.readTuples,r=e.readAssertions,i=e.writeAssertions;Promise.all([n(),t()]).then(function(){var e=Ze(o().mark((function e(t){var n,a,s,l,c,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ge(t,2),a=n[0],s=n[1],l=a.tuples,G(l),e.next=5,r(s.authorizationModelId);case 5:if(!(c=e.sent).length){e.next=10;break}ge(c.map((function(e){var t=e.tuple_key;return{user:t.user,relation:t.relation,object:t.object,check:e.expectation}}))),e.next=22;break;case 10:if(ye.isGlobal){e.next=22;break}if(e.prev=11,!(null===(u=A.e0.getAssertionsFromLocalStorage(ye.id))||void 0===u?void 0:u.length)){e.next=18;break}return ge(u),e.next=17,i(s.authorizationModelId,u.map((function(e){return{tuple_key:{user:e.user,relation:e.relation,object:e.object},expectation:e.check}})));case 17:A.e0.clearAssertionsFromLocalStorage(ye.id);case 18:e.next=22;break;case 20:e.prev=20,e.t0=e.catch(11);case 22:P((0,E.vo)({type_definitions:JSON.parse(s.code)})),M(s.raw||[]),N(s.authorizationModelId),ne(!1);case 26:case"end":return e.stop()}}),e,null,[[11,20]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ne(!1),Ee("error","Error reading tuples: ".concat(e.message))}))}),[ye]),u.useEffect((function(){Z.length>0?ie(!0):(ie(!1),l(!1),le(!0))}),[Z]),u.useEffect((function(){ve(ye)}),[ye]);var Le=Ge(u.useState(!1),2),Oe=Le[0],Ie=Le[1],Be=Ge(u.useState(0),2),Pe=Be[0],Re=Be[1],ze=[{target:"#step-1",content:(0,i.jsxs)(Ke,{gutter:"small",children:[(0,i.jsx)("h6",{children:"Authorization Model"}),(0,i.jsx)("p",{children:"An authorization model contains a set of type definitions that specify the types of objects in the system and the set of relations that users can have to objects of each type, and how those relations interact."})]}),placement:"auto",disableBeacon:!0},{target:"#step-3",content:(0,i.jsxs)(Ke,{gutter:"small",children:[(0,i.jsx)("h6",{children:"Previewer"}),(0,i.jsx)("p",{children:"Visualize the relations defined in your type definitions, and their dependencies."})]}),placement:"auto",disableBeacon:!0},{target:"#step-2",content:(0,i.jsxs)(Ke,{gutter:"small",children:[(0,i.jsx)("h6",{children:"Tuples"}),(0,i.jsx)("p",{children:"A relationship tuple represents a relation that a user (or set of users) has with an object. "})]}),placement:"auto",disableBeacon:!0},{target:"#step-4",content:(0,i.jsxs)(Ke,{gutter:"small",children:[(0,i.jsx)("h6",{children:"Queries"}),(0,i.jsx)("p",{children:"This view allows you to run authorization queries and visualize why access to specific objects is granted."})]}),placement:"auto",disableBeacon:!0}];u.useEffect((function(){var e=g().get("sandman.tour");Ie("undefined"===typeof e||e)}),[]);var Me=function(e,t,n){var r;if(s().find(e,s().pick(t,["user","relation","object"]))){var o="tuple"===n?"Client error: relationship tuple already exists":"You already have an assertion for that relationship tuple, please delete it to create a new one";throw Ee("error",o),new Error(o)}var i=Ge(t.object.split(":"),1)[0],a=z.find((function(e){return e.type===i}));if(!a){var l="Client error: Error creating ".concat(n,", try again later: Type ").concat(i," not found");throw Ee("error",l),new Error(l)}if(!(null===(r=a.relations)||void 0===r?void 0:r[t.relation])){var c="Client error: Error creating ".concat(n,", try again later: Relation ").concat(t.relation," not found in the type ").concat(a.type);throw Ee("error",c),new Error(c)}},De=function(){var e=Ze(o().mark((function e(t){var n,r,i,a,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s().find(Z,t)){e.next=4;break}throw Ee("error","Client error: could not delete tuple"),new Error("Tuple missing");case 4:return n=(0,A.ZH)(ye.id).deleteTuples,e.prev=5,e.next=8,n([t]);case 8:-1!==(r=s().findIndex(Z,t))&&(i=Z.slice(0,r).concat(Z.slice(r+1)),G(i)),Ee("success","Tuple deleted!"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),Ee("error","Error deleting tuple, try again later: ".concat((null===(l=null===(a=e.t0.response)||void 0===a?void 0:a.data)||void 0===l?void 0:l.message)||""));case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Ze(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Me(Z,t,"tuple"),n=(0,A.ZH)(ye.id).writeTuples,e.next=4,n([t]).then((function(){var e=Z.concat([t]);G(e),Ee("success","Tuple created!")}),(function(e){var t,n;Ee("error","Error creating tuple, try again later: ".concat((null===(n=null===(t=e.response)||void 0===t?void 0:t.data)||void 0===n?void 0:n.message)||""))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var e=Ze(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Me(me,t,"assertion"),n=me.concat([t]),r=(0,A.ZH)(ye.id).writeAssertions,e.next=5,r(_,n.map((function(e){return{tuple_key:{user:e.user,relation:e.relation,object:e.object},expectation:e.check}})));case 5:ge(n),Ee("success","Assertion created!");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=Ze(o().mark((function e(t,n){var r,i,a,l,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),e.prev=1,-1!==(r=s().findIndex(me,n))){e.next=6;break}return Ee("error","Client error: Assertion not found"),e.abrupt("return");case 6:return i=me.slice(0,r).concat(me.slice(r+1)),a=(0,A.ZH)(ye.id).writeAssertions,e.next=10,a(_,i.map((function(e){return{tuple_key:{user:e.user,relation:e.relation,object:e.object},expectation:e.check}})));case 10:ge(i),Ee("success","Assertion deleted!"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),Ee("error","Error deleting assertion, try again later: ".concat((null===(c=null===(l=e.t0.response)||void 0===l?void 0:l.data)||void 0===c?void 0:c.message)||""));case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,n){return e.apply(this,arguments)}}(),Ue=function(){Ee("success","Copied to clipboard!")},He={namespaces:(0,i.jsx)(k.a2,{children:(0,i.jsxs)(k.s_,{id:"step-1",children:[(0,i.jsx)(k.Dx,{children:(0,i.jsxs)(v.StackLayout,{distribution:"spaceBetween",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{children:"Authorization Model"})," (",z.length,")"]}),(0,i.jsxs)(v.ButtonGroup,{compressed:!0,align:"right",children:[(0,i.jsx)(p(),{text:JSON.stringify({type_definitions:z},null,"  "),onCopy:Ue,children:(0,i.jsx)(Xe,{icon:"copy",label:"Copy as JSON",size:"small",appearance:"secondary",className:"namespace-opts-btn",children:"JSON"})}),(0,i.jsx)(p(),{text:B,onCopy:Ue,children:(0,i.jsx)(Xe,{icon:"copy",label:"Copy as Friendly DSL",size:"small",appearance:"secondary",className:"namespace-opts-btn",children:"DSL"})})]})]})}),(0,i.jsx)($e,{value:B,onSave:function(e){de(!0);var t=(0,E.le)(e);(0,(0,A.ZH)(ye.id).writeNamespaces)(t).then((function(e){var n=e.authorizationModelId;M(t.type_definitions),N(n),de(!1),Ee("success","Saved authorization model")}),(function(e){Ee("error","Error saving types, try again later: ".concat(e.response.data.message)),de(!1)}))},readOnly:ye.isGlobal,isLoading:ue})]})}),tuples:(0,i.jsx)(k.a2,{children:(0,i.jsx)(k.s_,{id:"step-2",step2:!0,children:(0,i.jsx)(_e,{onPressExecuteQueryFromTest:function(e,t){e.stopPropagation(),Se("is ".concat(t.user," related to ").concat(t.object," as ").concat(t.relation,"?")),l(!0),Ce(!0)},namespaces:z,tests:me,onTestCreate:Fe,onTestDelete:We,tuples:Z,store:ye,onTupleCreate:Ne,onTupleDelete:De,addAlert:Ee,setTests:ge,joy:{stepIndex:Pe}})})}),rightPanels:(0,i.jsxs)("div",{style:{display:"flex"},children:[(0,i.jsx)(k.cU,{showLeftPanel:m,setShowLeftPanel:j}),(0,i.jsxs)(k.$r,{showExpand:a,children:[(0,i.jsx)(k.s_,{collapsed:a,onClick:Ae(!1),id:"step-3",children:(0,i.jsx)(I.M,{showExpand:a,store:ye,namespaces:z})}),(0,i.jsx)(k.s_,{collapsed:!a,onClick:Ae(!0),id:"step-4",children:(0,i.jsx)(C.j,{showExpand:a,store:ye,authorizationModelId:_,completionEntries:H,joy:{stepIndex:Pe,runTour:Oe},cachedResolutionTrees:{cachedResolutionTrees:X},setCachedResolutionTrees:{setCachedResolutionTrees:Y},queryTest:we,shouldRunExpand:Te,setShouldRunExpand:Ce,shouldCleanQuery:se,setShouldCleanQuery:le})})]})]})};return te?(0,i.jsxs)(qe,{children:[(0,i.jsx)(v.Spinner,{inverse:!0,size:"large"}),(0,i.jsx)("p",{children:"Crafting your playground..."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(k.Ar,{children:[(0,i.jsxs)(k.h4,{children:[(0,i.jsx)(L.T,{}),(0,i.jsx)(T,{alerts:J}),(0,i.jsx)(V,{selectedStoreLabel:ye.label,onButtonClickSuccess:Ue,onStoreChange:function(e){var t,r=e.target.value,o=fe.getByLabel(r);ve(s().omit(o,["assertions"])),ge(null!==(t=null===o||void 0===o?void 0:o.assertions)&&void 0!==t?t:[]),l(!1),n.push("/sandbox/?store=".concat(r))},storeManager:fe}),(0,i.jsxs)(y.Box,{sx:{mx:3,gridGap:"1rem",alignItems:"center",justifyContent:"center",flex:"1",position:"absolute",left:0,right:0,margin:"auto",width:"460px",textAlign:"center"},children:[(0,i.jsx)(O.m,{variant:"text",children:(0,i.jsxs)("a",{target:"_blank",rel:"noreferrer",href:"https://discord.gg/pvbNmqC",style:{color:"inherit",textDecoration:"inherit",display:"flex",alignItems:"center"},children:["Join",(0,i.jsxs)(y.Box,{component:"span",sx:{ml:1,display:{xs:"none",lg:"flex"}},children:[" ","the community"]})]})}),(0,i.jsx)(O.m,{variant:"text",children:(0,i.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://docs.fga.dev",style:{color:"inherit",textDecoration:"inherit",display:"flex",alignItems:"center"},children:"Docs"})}),(oe||ye.isGlobal)&&(0,i.jsx)(O.m,{variant:"text",onClick:function(){Ie(!0)},children:(0,i.jsxs)(y.Box,{alignItems:"center",children:[(0,i.jsx)(y.Box,{component:"span",sx:{mr:1,display:{xs:"none",lg:"flex"}},children:"Take a"}),"Tour"]})})]}),(0,i.jsxs)(y.Box,{ml:"auto",mt:"-3px",alignItems:"center",display:"flex",children:[(0,i.jsx)(y.Box,{mr:1,children:(0,i.jsxs)(O.m,{"aria-label":"New Store",variant:"contained",color:"primary",onClick:function(){n.push("/stores/create")},style:{minWidth:"36px",height:"33px"},children:[(0,i.jsx)(y.Box,{children:(0,i.jsx)(y.Box,{sx:{display:{xs:"none",md:"flex"}},children:"New store"})}),(0,i.jsx)(y.Box,{sx:{display:{xs:"flex",md:"none"}},children:(0,i.jsx)(y.PlusIcon,{size:"20"})})]})}),(0,i.jsx)(y.Box,{mr:1,children:(0,i.jsx)(y.Link,{href:"https://dashboard.fga.dev/",ariaLabel:"Sign up",id:"sign-up-button",newTab:!0,style:{textDecoration:"none"},children:(0,i.jsx)(O.m,{"aria-label":"New Store",variant:"outlined",style:{minWidth:"36px",height:"33px",color:"white"},children:(0,i.jsx)(y.Box,{children:"Sign up"})})})}),!ye.isGlobal&&(0,i.jsx)(W,{selectedStoreLabel:ye.label,onButtonClickSuccess:Ue,storeManager:fe})]})]}),(0,i.jsx)(k.pl,{children:(0,i.jsx)(h.Iy,{className:"mosaic-background",renderTile:function(e){return He[e]},resize:{minimumPaneSizePercentage:25},initialValue:{direction:"row",first:{direction:"column",first:"namespaces",second:"tuples"},second:"rightPanels",splitPercentage:m?33:-.27}})})]}),(0,i.jsx)(S.Z,{styles:Je}),(0,i.jsx)(f.ZP,{locale:{last:"Finish"},floaterProps:{disableAnimation:!0},run:Oe,callback:function(e){var t=e.action,n=e.index,r=e.type,o=e.status,i=function(){g().set("sandman.tour",!1),Ie(!1),Re(0)};t===f.aO.CLOSE&&i(),[f.Q_.FINISHED,f.Q_.SKIPPED].includes(o)?i():[f.FP.STEP_AFTER,f.FP.TARGET_NOT_FOUND].includes(r)&&((0===n&&"next"===t||2===n&&"prev"===t)&&l(!1),2===n&&"next"===t&&(l(!0),setTimeout((function(){var e=document.querySelector('[data-action="primary"]');e&&(e.setAttribute("disabled","true"),setTimeout((function(){e.removeAttribute("disabled")}),2400))}))),Re(n+(t===f.aO.PREV?-1:1)))},showProgress:!1,continuous:!0,steps:ze,stepIndex:Pe,spotlightPadding:0,styles:{beaconInner:{background:"#EB5424"},beaconOuter:{borderColor:"#EB5424",backgroundColor:"rgba(235, 84, 36, .2)"},tooltip:{padding:24},tooltipContainer:{padding:0},tooltipContent:{padding:0},buttonClose:{color:"#ffffff",backgroundColor:"#232323",borderRadius:100,padding:3,marginRight:8,marginTop:8}}})]})}}}]);